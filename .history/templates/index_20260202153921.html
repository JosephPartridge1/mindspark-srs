
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ MINDSPARK</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        /* Critical CSS for input field to prevent FOUC */
        #answer-input {
            width: 100%;
            max-width: 600px;
            height: 70px;
            padding: 20px 25px;
            font-size: 22px;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            background: rgba(10, 10, 20, 0.9);
            border: 3px solid #00f3ff;
            border-radius: 15px;
            color: #00f3ff;
            box-shadow: 0 0 25px rgba(0, 243, 255, 0.5);
            transition: all 0.3s ease;
            box-sizing: border-box;
            display: block;
            margin: 0 auto;
        }
        #answer-input.correct {
            border-color: #00ff9d;
            background: rgba(0, 255, 157, 0.1);
            color: #00ff9d;
        }
        #answer-input.incorrect {
            border-color: #ff0066;
            background: rgba(255, 0, 102, 0.1);
            color: #ff0066;
        }
    </style>
</head>
<body>
    <!-- Particle Background -->
    <div class="particles" id="particles"></div>

    <!-- Header -->
    <header class="header">
        <h1>üöÄ MINDSPARK</h1>
        <div class="status-bar">
            <div class="status-item">
                <div class="status-dot" id="api-status"></div>
                <span id="connection-status">API: CHECKING...</span>
            </div>
            <div class="status-item">
                <span id="session-info">Session: Ready</span>
            </div>
        </div>
    </header>

    <!-- Main Layout -->
    <main class="main">
        <!-- Content Area -->
        <div class="content">
            <!-- LEARN PAGE -->
            <div id="learn-page" class="page active">
                <section class="learning-panel">
                    <div class="page-header">
                        <h2>üéÆ LEARNING SESSION</h2>
                        <div class="goal-display">
                            <span class="goal-text">Today's Goal: <span id="daily-goal">0/20</span> words</span>
                        </div>
                    </div>

                    <!-- Enhanced Typing Exercise UI -->
                    <div class="typing-exercise" id="typing-exercise">
                        <!-- Progress Bar -->
                        <div class="progress-section">
                            <div class="progress-bar">
                                <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                            </div>
                            <div class="progress-text" id="progress-text">0 / 10 words completed</div>
                        </div>

                        <!-- Word Information Card -->
                        <div class="word-info-card">
                            <div class="word-header">
                                <h3>KATA SAAT INI</h3>
                            </div>
                            <div class="word-content">
                                <div class="english-word" id="english-word">Loading...</div>
                                <div class="word-details">
                                    <span class="part-of-speech" id="part-of-speech">[noun]</span>
                                    <div class="example-sentence" id="example-sentence">"Example sentence here."</div>
                                </div>
                            </div>
                        </div>

                        <!-- Translation Input Section -->
                        <div class="translation-section">
                            <div class="translation-header">
                                <h3>TERJEMAHKAN KE BAHASA INDONESIA</h3>
                                <div class="input-hint">* Case-insensitive, auto-trim</div>
                            </div>

                            <div class="input-container">
                                <div class="input-wrapper">
                                    <input
                                        type="text"
                                        id="answer-input"
                                        class="enhanced-input"
                                        placeholder="Ketik terjemahan (Bahasa Indonesia)..."
                                        autocomplete="off"
                                        autofocus
                                        spellcheck="false"
                                    >
                                    <button id="submit-btn" class="cyber-button">
                                        <span class="btn-text">SUBMIT</span>
                                        <span class="btn-icon">‚û°Ô∏è</span>  
                                    </button>  
                                </div>


                            </div>
                        </div>

                        <!-- Status & Feedback -->
                        <div class="status-section">
                            <div class="status-indicator" id="status-indicator">STATUS: Menunggu jawaban...</div>
                            <div class="feedback-container" id="feedback-container" style="display: none;">
                                <div class="feedback-message" id="feedback-message"></div>
                                <div class="streak-info" id="streak-info"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Legacy Flashcard UI (hidden by default) -->
                    <div class="vocab-card" id="vocab-card" style="display: none;">
                        <div class="card-inner">
                            <div class="card-face card-front">
                                <div class="card-word" id="current-word">Loading...</div>
                                <div class="card-hint">Click to reveal meaning</div>
                            </div>
                            <div class="card-face card-back">
                                <div class="card-meaning" id="word-meaning"></div>
                                <div class="card-example" id="word-example"></div>
                            </div>
                        </div>
                    </div>

                    <div class="rating-buttons" id="rating-buttons" style="display: none;">
                        <button class="rating-btn again" onclick="submitReview(1)">
                            <div class="rating-icon">‚ùå</div>
                            <div class="rating-text">AGAIN</div>
                            <div class="rating-desc">1 day</div>
                        </button>
                        <button class="rating-btn hard" onclick="submitReview(2)">
                            <div class="rating-icon">‚ö†Ô∏è</div>
                            <div class="rating-text">HARD</div>
                            <div class="rating-desc">1 day</div>
                        </button>
                        <button class="rating-btn good" onclick="submitReview(3)">
                            <div class="rating-icon">‚úÖ</div>
                            <div class="rating-text">GOOD</div>
                            <div class="rating-desc">2 days</div>
                        </button>
                        <button class="rating-btn easy" onclick="submitReview(4)">
                            <div class="rating-icon">üöÄ</div>
                            <div class="rating-text">EASY</div>
                            <div class="rating-desc">4-7 days</div>
                        </button>
                    </div>

                    <div class="control-buttons" style="display: none;">
                        <button class="btn btn-primary" onclick="flipCard()">üëÅÔ∏è REVEAL</button>
                        <button class="btn btn-secondary" onclick="nextWord()" id="next-btn" disabled>‚è≠Ô∏è NEXT</button>
                    </div>


                </section>
            </div>

            <!-- REVIEW PAGE -->
            <div id="review-page" class="page">
                <section class="review-panel">
                    <div class="page-header">
                        <h2>üîÑ REVIEW SESSION</h2>
                        <div class="review-stats">
                            <span>Due Today: <span id="due-count">0</span></span>
                            <span>Avg Ease: <span id="avg-ease">0.0</span></span>
                        </div>
                    </div>

                    <div class="review-filters">
                        <div class="filter-group">
                            <label>Difficulty:</label>
                            <select id="difficulty-filter">
                                <option value="all">All</option>
                                <option value="hard">Hard</option>
                                <option value="medium">Medium</option>
                                <option value="easy">Easy</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>Sort by:</label>
                            <select id="sort-filter">
                                <option value="due-date">Due Date</option>
                                <option value="difficulty">Difficulty</option>
                                <option value="ease">Ease Factor</option>
                            </select>
                        </div>
                        <button class="btn btn-primary" onclick="applyFilters()">Apply</button>
                    </div>

                    <div class="review-list" id="review-list">
                        <!-- Review items will be populated by JS -->
                    </div>

                    <div class="review-card" id="review-card" style="display: none;">
                        <div class="vocab-card">
                            <div class="card-inner">
                                <div class="card-face card-front">
                                    <div class="card-word" id="review-word">Word</div>
                                    <div class="card-hint">Click to reveal</div>
                                </div>
                                <div class="card-face card-back">
                                    <div class="card-meaning" id="review-meaning">Meaning</div>
                                    <div class="card-example" id="review-example">Example</div>
                                </div>
                            </div>
                        </div>

                        <div class="rating-buttons">
                            <button class="rating-btn again" onclick="submitReviewCard(1)">‚ùå AGAIN</button>
                            <button class="rating-btn hard" onclick="submitReviewCard(2)">‚ö†Ô∏è HARD</button>
                            <button class="rating-btn good" onclick="submitReviewCard(3)">‚úÖ GOOD</button>
                            <button class="rating-btn easy" onclick="submitReviewCard(4)">üöÄ EASY</button>
                        </div>

                        <div class="review-actions">
                            <button class="btn btn-secondary" onclick="backToReviewList()">‚Üê Back to List</button>
                        </div>
                    </div>
                </section>
            </div>

            <!-- STATISTICS PAGE -->
            <div id="stats-page" class="page">
                <section class="stats-panel">
                    <div class="page-header">
                        <h2>üìä LEARNING STATISTICS</h2>
                        <div class="stats-period">
                            <button class="period-btn active" data-period="7">7 Days</button>
                            <button class="period-btn" data-period="30">30 Days</button>
                            <button class="period-btn" data-period="90">90 Days</button>
                        </div>
                    </div>

                    <div class="stats-overview">
                        <div class="stat-card">
                            <div class="stat-value" id="stat-total">0</div>
                            <div class="stat-label">Total Words</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="stat-mastered">0</div>
                            <div class="stat-label">Mastered</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="stat-streak">0</div>
                            <div class="stat-label">Day Streak</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="stat-accuracy">0%</div>
                            <div class="stat-label">Accuracy</div>
                        </div>
                    </div>

                    <div class="charts-container">
                        <div class="chart-card">
                            <h3>Words Learned Over Time</h3>
                            <div class="line-chart" id="learning-chart">
                                <canvas id="learning-canvas"></canvas>
                            </div>
                        </div>

                        <div class="chart-card">
                            <h3>Review Quality Distribution</h3>
                            <div class="pie-chart" id="quality-chart">
                                <canvas id="quality-canvas"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="progress-ring-container">
                        <div class="progress-ring-card">
                            <h3>Mastery Progress</h3>
                            <div class="progress-ring" id="mastery-ring">
                                <svg width="120" height="120">
                                    <circle cx="60" cy="60" r="50" stroke="var(--glass-border)" stroke-width="8" fill="none"/>
                                    <circle cx="60" cy="60" r="50" stroke="var(--cyber-cyan)" stroke-width="8" fill="none"
                                            stroke-dasharray="314" stroke-dashoffset="314" id="mastery-circle"/>
                                </svg>
                                <div class="ring-text">
                                    <div class="ring-value" id="mastery-value">0%</div>
                                    <div class="ring-label">Mastered</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- SETTINGS PAGE -->
            <div id="settings-page" class="page">
                <section class="settings-panel">
                    <div class="page-header">
                        <h2>‚öôÔ∏è SETTINGS</h2>
                    </div>

                    <div class="settings-grid">
                        <div class="setting-group">
                            <h3>Appearance</h3>
                            <div class="setting-item">
                                <label class="toggle-label">
                                    <input type="checkbox" id="dark-mode-toggle">
                                    <span class="toggle-slider"></span>
                                    Dark Mode
                                </label>
                            </div>
                        </div>

                        <div class="setting-group">
                            <h3>Learning Goals</h3>
                            <div class="setting-item">
                                <label>Daily Target (words):</label>
                                <input type="range" id="daily-target" min="5" max="50" value="20">
                                <span id="daily-target-value">20</span>
                            </div>
                        </div>

                        <div class="setting-group">
                            <h3>Language</h3>
                            <div class="setting-item">
                                <label>Interface Language:</label>
                                <select id="language-select">
                                    <option value="en">English</option>
                                    <option value="id">Indonesian</option>
                                </select>
                            </div>
                        </div>

                        <div class="setting-group">
                            <h3>API Configuration</h3>
                            <div class="setting-item">
                                <label>API Endpoint:</label>
                                <input type="text" id="api-endpoint" value="http://localhost:5000">
                            </div>
                            <div class="setting-item">
                                <button class="btn btn-secondary" onclick="testConnection()">Test Connection</button>
                                <span id="connection-test-result"></span>
                            </div>
                        </div>

                        <div class="setting-group">
                            <h3>Data Management</h3>
                            <div class="setting-item">
                                <button class="btn btn-warning" onclick="exportData()">Export Data</button>
                                <button class="btn btn-danger" onclick="showResetModal()">Reset Progress</button>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <!-- Modals -->
    <div id="reset-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h3>Reset Progress</h3>
            <p>Are you sure you want to reset all your learning progress? This action cannot be undone.</p>
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="hideResetModal()">Cancel</button>
                <button class="btn btn-danger" onclick="confirmReset()">Reset Progress</button>
            </div>
        </div>
    </div>

    <!-- Notifications -->
    <div id="notifications" class="notifications"></div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
